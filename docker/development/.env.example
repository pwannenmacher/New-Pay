# Server Configuration
SERVER_HOST=localhost
SERVER_PORT=8080
SERVER_TIMEOUT_READ=15s
SERVER_TIMEOUT_WRITE=15s
SERVER_TIMEOUT_IDLE=60s

# Database Configuration
# Note: When using Docker Compose, these credentials are used for both
# the PostgreSQL container and the API connection
DB_HOST=localhost
DB_PORT=5432
DB_USER=newpay
DB_PASSWORD=your_password_here
DB_NAME=newpay_db
DB_SSLMODE=disable
DB_MAX_OPEN_CONNS=25
DB_MAX_IDLE_CONNS=5
DB_CONN_MAX_LIFETIME=5m

# JWT Configuration
# IMPORTANT: Generate a persistent ECDSA key to prevent session invalidation on restart
# Run: go run scripts/generate-jwt-keys.go
# Then copy the generated JWT_SECRET value here (as single line with \n escapes)
# See docs/JWT_KEY_MANAGEMENT.md for details
JWT_SECRET=your_super_secret_jwt_key_change_this_in_production
JWT_EXPIRATION=24h
JWT_REFRESH_EXPIRATION=168h

# Session Configuration
SESSION_TIMEOUT=30m

# Email Configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your_email@gmail.com
SMTP_PASSWORD=your_email_password
SMTP_FROM=noreply@newpay.com
EMAIL_VERIFICATION_URL=http://localhost:8080/api/v1/auth/verify-email
PASSWORD_RESET_URL=http://localhost:8080/api/v1/auth/reset-password

# OAuth/SSO Configuration (Multiple Providers)
# Global OAuth settings
# OAUTH_REDIRECT_URL: Backend callback URL (where OAuth provider sends user after login)
OAUTH_REDIRECT_URL=http://localhost:8080/api/v1/auth/oauth/callback
# OAUTH_FRONTEND_CALLBACK_URL: Frontend URL (where backend redirects user with token)
OAUTH_FRONTEND_CALLBACK_URL=http://localhost:3001/oauth/callback

# Provider 1 - GitLab (example)
OAUTH_1_NAME=GitLab
OAUTH_1_ENABLED=true
OAUTH_1_CLIENT_ID=your_gitlab_client_id
OAUTH_1_CLIENT_SECRET=your_gitlab_client_secret
OAUTH_1_AUTH_URL=https://gitlab.com/oauth/authorize
OAUTH_1_TOKEN_URL=https://gitlab.com/oauth/token
OAUTH_1_USER_INFO_URL=https://gitlab.com/api/v4/user

# Provider 2 - Google (example)
OAUTH_2_NAME=Google
OAUTH_2_ENABLED=true
OAUTH_2_CLIENT_ID=your_google_client_id
OAUTH_2_CLIENT_SECRET=your_google_client_secret
OAUTH_2_AUTH_URL=https://accounts.google.com/o/oauth2/v2/auth
OAUTH_2_TOKEN_URL=https://oauth2.googleapis.com/token
OAUTH_2_USER_INFO_URL=https://www.googleapis.com/oauth2/v2/userinfo

# Provider 3 - Authentik (example)
OAUTH_3_NAME=Authentik
OAUTH_3_ENABLED=false
OAUTH_3_CLIENT_ID=your_authentik_client_id
OAUTH_3_CLIENT_SECRET=your_authentik_client_secret
OAUTH_3_AUTH_URL=https://your-authentik-domain.com/application/o/authorize/
OAUTH_3_TOKEN_URL=https://your-authentik-domain.com/application/o/token/
OAUTH_3_USER_INFO_URL=https://your-authentik-domain.com/application/o/userinfo/

# Provider 4 - Microsoft/Azure AD (example)
# OAUTH_4_NAME=Microsoft
# OAUTH_4_ENABLED=false
# OAUTH_4_CLIENT_ID=your_microsoft_client_id
# OAUTH_4_CLIENT_SECRET=your_microsoft_client_secret
# OAUTH_4_AUTH_URL=https://login.microsoftonline.com/{tenant}/oauth2/v2.0/authorize
# OAUTH_4_TOKEN_URL=https://login.microsoftonline.com/{tenant}/oauth2/v2.0/token
# OAUTH_4_USER_INFO_URL=https://graph.microsoft.com/v1.0/me

# Add more providers as needed (up to OAUTH_MAX_PROVIDERS)
# Each provider needs: NAME, ENABLED, CLIENT_ID, CLIENT_SECRET, AUTH_URL, TOKEN_URL, USER_INFO_URL

# CORS Configuration
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Accept,Authorization,Content-Type,X-CSRF-Token
CORS_EXPOSED_HEADERS=Link
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=300

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_DURATION=1m

# Application
APP_ENV=development
APP_NAME=NewPay
APP_VERSION=1.0.0
LOG_LEVEL=debug

# Registration Settings
# Set to true to allow new user registration via email/password
ENABLE_REGISTRATION=false
# Set to true to allow new user registration via OAuth providers
ENABLE_OAUTH_REGISTRATION=false
# Note: The first user to register (via email or OAuth) automatically becomes an Admin

# Scheduler Configuration
# Enable/disable scheduled tasks
SCHEDULER_ENABLE_DRAFT_REMINDERS=true
SCHEDULER_ENABLE_REVIEWER_SUMMARY=true

# Cron expressions for scheduled tasks (minute hour day month weekday)
# Draft reminders: when to check for draft assessments (default: Monday 9 AM)
SCHEDULER_DRAFT_REMINDER_CRON=0 9 * * 1
# Reviewer summary: when to send daily summary (default: Daily 8 AM)
SCHEDULER_REVIEWER_SUMMARY_CRON=0 8 * * *

# Reminder interval for draft assessments in minutes
# Default: 10080 minutes = 7 days
# Examples: 1440 = 1 day, 4320 = 3 days, 10080 = 7 days, 20160 = 14 days
SCHEDULER_REMINDER_INTERVAL_MINS=10080

# Vault Configuration (Key Management Service)
# HashiCorp Vault for encryption key management
VAULT_ENABLED=true
VAULT_ADDR=http://vault:8200
# IMPORTANT: In production, use a secure token stored in a secret manager
# For development, this matches the root token from docker-compose.yml
VAULT_ROOT_TOKEN=dev-root-token
VAULT_TOKEN=dev-root-token
VAULT_TRANSIT_MOUNT=transit
